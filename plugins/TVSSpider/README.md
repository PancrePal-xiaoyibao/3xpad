# TVSSpider - TVS1网站视频搜索插件

## 简介

TVSSpider是一个为微信机器人设计的插件，用于搜索并获取TVS1网站的影视资源。该插件采用两步式搜索机制，有效防止因一次性发送过多链接导致的微信封号风险。

## 特性

- **两步式搜索**：先显示基本信息，再获取详细链接
- **多用户支持**：支持多人同时在群内搜索，互不干扰
- **防封号设计**：避免一次性发送过多链接
- **缓存机制**：搜索结果缓存5分钟，提高响应速度
- **美观的结果展示**：支持emoji显示，信息排版清晰
- **灵活配置**：通过config.toml文件进行自定义配置

## 使用方法

### 基本指令

- `TVS 关键词` - 搜索影视剧，只显示基本信息（标题、演员、年份）
- `TVS# 编号` - 获取指定编号的播放链接

### 使用示例

1. 搜索影片:
   ```
   TVS 流浪地球
   ```
   
   机器人会返回搜索结果列表（不含链接）:
   ```
   🔍 找到 10 条与"流浪地球"相关的内容

   【1】流浪地球2
      👨‍👩‍👧‍👦 主演: 吴京、刘德华、李雪健等
      📆 2023 | 🌍 中国大陆

   【2】流浪地球
      👨‍👩‍👧‍👦 主演: 郭帆、吴京、屈楚萧等
      📆 2019 | 🌍 中国大陆

   📌 获取链接请发送: TVS# 编号 (例如: TVS# 1)
   ```

2. 获取详细信息和链接:
   ```
   TVS# 1
   ```
   
   机器人会返回详细信息和播放链接:
   ```
   🎬 【流浪地球2】

   📺 播放链接: https://www.tvs1.vip/xxx

   👨‍👩‍👧‍👦 主演: 吴京、刘德华、李雪健
   📆 年份: 2023 | 🌍 地区: 中国大陆
   📝 简介: 太阳即将毁灭，人类在地球表面建造出巨大的推进器...
   ```

## 配置说明

插件使用`config.toml`文件进行配置，支持以下设置：

```toml
# 全局配置
enable = true  # 是否启用插件
whitelist_groups = []  # 白名单群组，留空表示所有群组都可使用

# 基础配置
[basic]
command_prefix = "TVS"  # 命令前缀
base_url = "https://www.tvs1.vip"  # 网站地址

# 显示配置
[display]
max_results = 10  # 最大显示结果数
enable_emoji = true  # 是否使用emoji表情

# 请求配置
[request]
timeout = 10  # 请求超时时间(秒)
retry_times = 2  # 重试次数
```

## 安全特性

- 避免一次性发送大量链接，降低封号风险
- 缓存自动过期，定期清理无用数据
- 支持群组白名单，可限制使用范围

## 技术细节

- 使用异步方式处理HTTP请求，提高响应速度
- 采用BeautifulSoup解析HTML内容
- 基于用户ID和群组ID的缓存隔离机制
- 完善的错误处理和日志记录

## 作者

- 作者: BEelzebub
- 版本: 1.0.0

## 更新日志

### 1.0.0
- 初始版本发布
- 实现基本搜索功能
- 添加两步式搜索机制
- 增加多用户支持
- 优化结果展示

---

如有问题或建议，请联系插件作者。 